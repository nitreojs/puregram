<div align='center'>
  <img src='https://i.imgur.com/ZzjmE8i.png' />
</div>

<br />

<div align='center'>
  <a href='https://github.com/nitreojs/puregram'><b><code>puregram</code></b></a>
  <span>&nbsp;â€¢&nbsp;</span>
  <a href='#list-of-utilities'><b>list of utilities</b></a>
  <span>&nbsp;â€¢&nbsp;</span>
  <a href='https://t.me/puregram'><b>telegram channel</b></a>
</div>

## @puregram/utils

_package, containing some useful utilities for `puregram` package_

### introduction

this package exists only for one main reason: basically not everyone wants to have such utils as `getCasinoValues` and `WebApp` class when installing `puregram`, so these functions were moved to separated package

### example

```js
const { Telegram } = require('puregram')
const { getCasinoValues } = require('@puregram/utils')

const telegram = Telegram.fromToken(process.env.TOKEN)

telegram.updates.on('message', (context) => {
  if (context.hasDice() && context.dice.emoji === 'ðŸŽ°') {
    console.log(getCasinoValues(context.dice.value)); // e.g. ['seven', 'bar', 'grapes']
  }
})

telegram.updates.startPolling()
```

### installation

```sh
$ yarn add @puregram/utils
$ npm i -S @puregram/utils
```

---

## list of utilities

### `WebApp`

#### `generateSecretKey(token: string)`

_returns_: `Promise<WebAppGenerateSecretKeyResult>`

returns _secret key_ generated by the `token`

```js
const { key } = await WebApp.generateSecretKey(BOT_TOKEN)
```

#### `parseInitData(initData: string)`

_returns_: `string`

returns _parsed init data_

```js
const data = WebApp.parseInitData(initData)
```

#### `generateInitDataHash(initData: string, key: Buffer)`

_returns_: `Promise<WebAppGenerateInitDataHashResult>`

returns _init data hash_ generated by the `key`

```js
const { hash } = await WebApp.generateInitDataHash(initData, secretKey)
```

#### `validate(params: WebAppValidateInitDataParams)`

_returns_: `Promise<WebAppValidateResult>`

returns whether `params.initData` is valid or not

```js
const { valid } = await WebApp.validate({ initData, key: secretKey })
```

### `getCasinoValues(value: number | string)`

_returns_: `SlotMachineValue`

returns an _array of `CasinoValue`_ detected by `value` in the dice

```js
if (context.hasDice() && context.dice.emoji === 'ðŸŽ°') {
  return context.send(`You got ${getCasinoValues(context.dice.value).join(', ')}!`)
}
```
